// 仕様書準拠のMRV (Multiple Return Values) テスト

// MRV定義: カンマ区切りで型を列挙 (括弧なし)
fn pair ||->i32, i32 { 10 20 }

// 3つの引数をとる関数
fn add3 |x: i32, y: i32, z: i32|->i32 $x + y + z$;
fn add2 |a: i32, b: i32|->i32 $a + b$;

fn main ||->() {
    println("--- MRV Spec Test ---");

    // 1. 展開コンテキスト (P-style)
    // pair はスタック上にフラットに展開される (10, 20)
    // add3 5 10 20 と解釈される
    let v1 add3 5 pair;
    println(string_concat("v1 (P-style): ", i32_to_string(v1)));

    // 2. タプル化コンテキスト (C-style) + スプレッド
    // pair() はタプル (10, 20) を返す
    // ... で展開され、引数リストは (5, 10, 20) となる
    let v2 add3(5, ...pair());
    println(string_concat("v2 (Spread): ", i32_to_string(v2)));
}